{% extends "base.html" %}
{% block title %}Proje Ayarları{% endblock %}
{% block content %}

<style>
  .proj-settings-shell{
    max-width: 720px;
    margin: 0 auto;
  }

  .proj-settings-card{
    padding: 20px 22px;
    border-radius: 16px;
    box-shadow: var(--elev-2, 0 10px 30px rgba(15,23,42,0.12));
    border: 1px solid var(--line-soft, rgba(148,163,184,0.25));
  }

  .proj-settings-header{
    display:flex;
    flex-direction:column;
    gap:4px;
    margin-bottom:14px;
  }

  .proj-settings-header h2{
    margin:0;
    font-size:1.25rem;
  }

  .proj-settings-header p{
    margin:0;
    font-size:.85rem;
    color:var(--muted,#6b7280);
  }

  .proj-section{
    margin-top: 8px;
    padding-top: 10px;
  }

  .proj-section-title{
    font-size: .95rem;
    font-weight: 600;
    margin: 0 0 10px;
  }

  .field-label{
    display:flex;
    justify-content:space-between;
    font-size:.85rem;
    margin-bottom: 2px;
  }

  .field-label span.helper{
    font-size:.75rem;
    color:var(--muted,#6b7280);
  }

  .field-hint{
    margin: 2px 0 0;
    font-size: .75rem;
    color: var(--muted,#6b7280);
  }

  .proj-actions{
    display:flex;
    align-items:center;
    gap:8px;
    margin-top: 16px;
  }

  @media (max-width: 520px){
    .proj-settings-card{
      padding: 16px 14px;
      border-radius: 12px;
    }
    .proj-actions{
      flex-wrap: wrap;
    }
  }
</style>

<div class="container proj-settings-shell">
  <div class="card proj-settings-card">
    <div class="proj-settings-header">
      <h2>Proje Ayarları</h2>
      <p>Raporlarda görünecek iş yeri unvanı ve adresini düzenle.</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for c,m in messages %}
        <div class="flash {{c}}">{{ m }}</div>
      {% endfor %}
    {% endwith %}

    <form method="post" class="form">
      <div class="proj-section">
        <h3 class="proj-section-title">Proje Bilgileri</h3>

        <div>
          <div class="field-label">
            <label for="workplace_name">İş Yeri Unvanı</label>
            <span class="helper">En fazla 160 karakter</span>
          </div>
          <textarea
            id="workplace_name"
            class="input"
            name="workplace_name"
            rows="2"
            maxlength="160"
          >{{ (proj.workplace_name if proj else '')|e }}</textarea>
          <p class="field-hint">
            Örnek: “ABC İnşaat San. ve Tic. A.Ş. – X Projesi”.
          </p>
        </div>

        <div style="margin-top:10px">
          <div class="field-label">
            <label for="workplace_address">İş Yeri Adresi</label>
            <span class="helper">En fazla 320 karakter</span>
          </div>
          <textarea
            id="workplace_address"
            class="input"
            name="workplace_address"
            rows="3"
            maxlength="320"
          >{{ (proj.workplace_address if proj else '')|e }}</textarea>
          <p class="field-hint">
            İl/ilçe, mahalle, cadde, kapı numarası; raporda tek satır halinde yer alacak.
          </p>
        </div>
      </div>

      <div class="proj-actions">
        <a class="btn" href="{{ url_for('dashboard') }}">Geri</a>
        <div style="flex:1"></div>
        <button class="btn btn-primary">Kaydet</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
